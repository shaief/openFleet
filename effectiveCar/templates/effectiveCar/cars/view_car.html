{% extends "base.html" %}
{% load static %}

{% block title %}
{{ car.license_id }}
{% endblock %}


{% block content %}
<h1 align='center'>{{ car.nickname }}</h1>
<div class="row">
	<div class="col-md-4">
		<table class="table table-striped table-condensed">
			<tbody>
				<tr>
					<td>
						<strong>License id:</strong>
					</td>
					<td>
						{{ car.license_id }}
					</td>
				</tr>
				<tr>
					<td>
						<i class="glyphicon glyphicon-user"/>
						<strong>Driver: </strong>
					</td>
					<td>
						<a href="{% url 'view_owner' pk=car.current_owner.id %}">{{ car.current_owner.first_name }} {{ car.current_owner.last_name }}</a>
					</td>
				</tr>
				<tr>
					<td>
						<strong>Group: </strong>
					</td>
					<td>
						{{ car.classification }}
					</td>
				</tr>
				<tr>
					<td>
						<strong>Model: </strong>
					</td>
					<td>
						{{ car.maker }} {{ car.car_model }}
					</td>
				</tr>
				<tr>
					<td>
						<strong>Production year: </strong>
					</td>
					<td>
						{{ car.production_year }}
					</td>
				</tr>
				<tr>
					<td>
						<span class="glyphicon glyphicon-calendar"/>
						<strong>License renewal: </strong>
					</td>
					<td>
					{% ifequal license_renewal 1%}
					<span class="label label-danger">
						{{ car.license_renewal_date|date:"d/m/Y" }}
						<span class="glyphicon glyphicon-bell"/>
					</span>
					{% endifequal %}
					{% ifequal license_renewal 2%}
					<span class="label label-warning">
						{{ car.license_renewal_date|date:"d/m/Y" }}
					</span>
					{% endifequal %}
					{% ifequal license_renewal 3%}
					<span class="label label-success">
						{{ car.license_renewal_date|date:"d/m/Y" }}
					</span>
					{% endifequal %}
					</td>
				</tr>
				<tr>
					<td>
						<span class="glyphicon glyphicon-calendar"/>
						<strong>Insurance renewal: </strong>
					</td>
					<td>
					{% ifequal insurance_renewal 1%}
					<span class="label label-danger">
						{{ car.insurance_renewal_date|date:"d/m/Y" }}
						<span class="glyphicon glyphicon-bell"/>
						</span>
					{% endifequal %}
					{% ifequal insurance_renewal 2%}
					<span class="label label-warning">
						{{ car.insurance_renewal_date|date:"d/m/Y" }}
						</span>
					{% endifequal %}
					{% ifequal insurance_renewal 3%}
					<span class="label label-success">
						{{ car.insurance_renewal_date|date:"d/m/Y" }}
						</span>
					{% endifequal %}
					</td>
				</tr>
				<tr>
					<td>
						<span class="glyphicon glyphicon-dashboard"/>
						<strong>Kilometrage: </strong>
					</td>
					<td>
						{{ km }}
					</td>
				</tr>
				<tr>
					<td>
						<strong>Total cost of accidents: </strong>
					</td>
					<td>
					{% ifequal accidents_cost None %}
					No accidents reported
					{% else %}
					{{ accidents_cost }}
					{% endifequal %}
					</td>
				</tr>				
			</tbody>
		</table>
	</div>
	<div class="col-md-2">
		<table class="table table-condensed">
			<thead>
				<th class="active">
					<h3 align="center">Notifications</h3>
				</th>
			</thead>
			<tbody>
				<tr><td>
					{% ifequal license_renewal 1%}
					<button type="button" class="btn btn-danger btn-md  style="width:100%"">
						Renew car license<br>less than a week!
					</button>
					{% endifequal %}
					{% ifequal license_renewal 2%}
					<button type="button" class="btn btn-warning btn-md  style="width:100%"">
						Renew car license<br>less than a month!
					</button>
					{% endifequal %}
					{% ifequal license_renewal 3%}
					<button type="button" class="btn btn-success btn-md  style="width:100%"">
						License is renewed
					</button>
					{% endifequal %}
				</td></tr>
				<tr><td>
					{% ifequal insurance_renewal 1%}
					<button type="button" class="btn btn-danger btn-md  style="width:100%"">
						Renew car insurance<br>less than a week!
					</button>
					{% endifequal %}
					{% ifequal insurance_renewal 2%}
					<button type="button" class="btn btn-warning btn-md  style="width:100%"">
						Renew car insurance<br>less than a month!
					</button>
					{% endifequal %}
					{% ifequal insurance_renewal 3%}
					<button type="button" class="btn btn-success btn-md  style="width:100%"">
						Insurance is renewed
					</button>
					{% endifequal %}
				</td></tr>
				<tr><td>
					<a href="{% url 'accidents' pk=car.id %}">
						<button type="button" class="btn btn-default btn-md  style="width:100%"">
							{{ km }}
						</button>
					</a>
				</td></tr>
				<tr><td>
					{% ifequal accidents_cost None %}
					<button type="button" class="btn btn-default btn-md  style="width:100%"">
						No accidents reported!
					</button>
					{% else %}
					<a href="{% url 'accidents' pk=car.id %}">
						<button type="button" class="btn btn-default btn-md  style="width:100%"">
							Total cost of accidents: {{ accidents_cost }}
						</button>
					</a>
					{% endifequal %}
				</td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-md-2">
		<a href="{% url 'accidents' pk=car.id %}">
			<button type="button" class="btn btn-default btn-md">
				Accidents report
			</button>
		</a>
	</div>
</div>
<br>
<a href="{% url 'edit_car' pk=car.id%}"><button type="button" class="btn btn-default btn-md">
	<span class="glyphicon glyphicon-wrench"></span>
	Edit {{ car.license_id }}
</button></a>
<a href="{% url 'add_car' %}"><button type="button" class="btn btn-default btn-md">
	<span class="glyphicon glyphicon-plus"></span>
	Add a car
</button></a>
<br>
<div align="center">
{% ifnotequal previous_car None %}
<a href="{% url 'view_car' pk=previous_car.id %}"><button type="button" class="btn btn-default btn-md">
	<span class="glyphicon glyphicon-wrench"></span>
	Previous car
</button></a>
{% endifnotequal %}
{% ifnotequal next_car None %}
<a href="{% url 'view_car' pk=next_car.id %}"><button type="button" class="btn btn-default btn-md">
	<span class="glyphicon glyphicon-plus"></span>
	Next car
</button></a>
{% endifnotequal %}
</div>
{% endblock %}